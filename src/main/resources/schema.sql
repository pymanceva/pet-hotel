DROP TABLE IF EXISTS users;
DROP TABLE IF EXISTS pets;
DROP TABLE IF EXISTS rooms;

CREATE TABLE IF NOT EXISTS users
(
    id_users          BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    last_name_users   VARCHAR(30),
    first_name_users  VARCHAR(15)                             NOT NULL,
    middle_name_users VARCHAR(15),
    email_users       VARCHAR(254)                            NOT NULL,
    password_users    VARCHAR(10)                             NOT NULL,
    role_users        VARCHAR(16)                             NOT NULL,
    active_users      BOOLEAN DEFAULT TRUE                    NOT NULL,
    CONSTRAINT pk_user PRIMARY KEY (id_users),
    CONSTRAINT UQ_USER_EMAIL UNIQUE (email_users)
);

INSERT INTO users (first_name_users, email_users, password_users, role_users)
values ('boss', 'boss@mail.ru', 'boss_pwd', 'ROLE_BOSS');

CREATE TABLE IF NOT EXISTS pets
(
    id               BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    type_pet         VARCHAR(250)                            NOT NULL,
    breed_pet        VARCHAR(250)                            NOT NULL,
    sex_pet          VARCHAR(13)                             NOT NULL,
    age_pet          INTEGER                                 NOT NULL,
    weight_pet       INTEGER                                 NOT NULL,
    diet_pet         VARCHAR(21)                             NOT NULL,
    medication_pet   BOOLEAN                                 NOT NULL,
    contact_pet      BOOLEAN                                 NOT NULL,
    photographed_pet BOOLEAN                                 NOT NULL,
    comments_pet     VARCHAR(1000),
    CONSTRAINT pk_pet PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS rooms
(
    id_room          BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    number_room      VARCHAR(100)                            NOT NULL,
    area_room        REAL,
    type_room        VARCHAR(20)                             NOT NULL,
    description_room VARCHAR(150),
    visible_room     BOOLEAN DEFAULT TRUE,
    CONSTRAINT pk_room PRIMARY KEY (id_room),
    CONSTRAINT UQ_ROOM_NUMBER UNIQUE (number_room),
    CONSTRAINT positive_room_area CHECK (area_room >= 0)
);


